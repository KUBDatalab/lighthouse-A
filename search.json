[
  {
    "objectID": "report.html",
    "href": "report.html",
    "title": "Kalender",
    "section": "",
    "text": "library(readr)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(lubridate)\n\n\nAttaching package: 'lubridate'\n\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\nlibrary(jsonlite)\n\nrepo_b_dir &lt;- Sys.getenv(\"REPO_B_DIR\", unset = NA_character_)\nif (is.na(repo_b_dir) || repo_b_dir == \"\") stop(\"REPO_B_DIR is not set\")\n\nbookings_path &lt;- file.path(repo_b_dir, \"data\", \"bookings.csv\")\n\ndf &lt;- read_csv(bookings_path, show_col_types = FALSE)\n\nevents &lt;- df |&gt;\n  mutate(\n    start = ymd_hms(fromDate, tz = \"Europe/Copenhagen\"),\n    end   = ymd_hms(toDate,   tz = \"Europe/Copenhagen\"),\n    title = paste0(\"lid=\", lid, \" · cid=\", cid, \" · eid=\", eid)\n  ) |&gt;\n  transmute(\n    title = title,\n    start = format(start, \"%Y-%m-%dT%H:%M:%S\"),\n    end   = format(end,   \"%Y-%m-%dT%H:%M:%S\"),\n    id    = bookId\n  )\n\nevents_json &lt;- toJSON(events, auto_unbox = TRUE, dataframe = \"rows\")"
  }
]