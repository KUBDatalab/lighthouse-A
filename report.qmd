---
title: "Untitled"
format: html
---


```{r}
library(readr)
library(dplyr)
library(lubridate)
library(jsonlite)

# repo_b_dir <- Sys.getenv("REPO_B_DIR", unset = NA_character_)
# if (is.na(repo_b_dir) || repo_b_dir == "") {
#   stop("REPO_B_DIR is not set")
# }


# # Eksempel: fil i lighthouse-B
# input_path <- file.path(repo_b_dir, "data", "input.csv")
# bookings_path <- file.path(repo_b_dir, "data", "bookings.csv")
# bookings_details_path <- file.path(repo_b_dir, "data", "bookings_details.csv")
```


```{r}
# df <- readr::read_csv(bookings_path, show_col_types = FALSE) |> 
#     dplyr::select(bookId:toDate)
```




```{r}


# Læs data (tilpas filnavn hvis nødvendigt)


# Parse datoer (DK-tid)
# events <- df |>
#   mutate(
#     start = ymd_hms(fromDate, tz = "Europe/Copenhagen"),
#     end   = ymd_hms(toDate,   tz = "Europe/Copenhagen"),
#     title = paste0("lid=", lid, " · cid=", cid, " · eid=", eid)
#   ) |>
#   transmute(
#     title = title,
#     start = format(start, "%Y-%m-%dT%H:%M:%S"),
#     end   = format(end,   "%Y-%m-%dT%H:%M:%S"),
#     id    = bookId
#   )

# events_json <- toJSON(events, auto_unbox = TRUE, dataframe = "rows")
# events_json
```

<div id="calendar" style="max-width: 1200px; margin: 0 auto;"></div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.20/index.global.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const calendarEl = document.getElementById('calendar');

  const events = JSON.parse(document.querySelector('pre code').innerText);

  const calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'timeGridWeek',
    nowIndicator: true,
    firstDay: 1,
    height: "auto",
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
    },
    events: events
  });

  calendar.render();
});
</script>
